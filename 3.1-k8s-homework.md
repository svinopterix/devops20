# Компоненты K8s

Сделал рассчет требуемых ресурсов согласно таблице ниже. Т.к. самые "толстые" поды должны иметь минимум три реплики для работы RAFT-алгоритма, то минимальное число воркер нод - 3 + 1 резервная. Требования к ресурсам этих нод с учетом оверхеда k8s: 6 CPU cores, 12 GB RAM. Что близко к размеру инстанса 8C/16GB. Такой и выберем. 

Ответ: берём 4 ноды 8C/16GB

|                                  | Replicas | CPU, cores | RAM, GB       | Total cores | Total RAM |
| -------------------------------- | -------- | ---------- | ------------- | ----------- | --------- |
| DB                               | 3        | 1          | 4             | 3           | 12        |
| Cache                            | 3        | 1          | 4             | 3           | 12        |
| Frontend                         | 5        | 0.2        | 0.05          | 1           | 0.25      |
| Backend                          | 10       | 1          | 0.6           | 10          | 6         |
| K8s CPU (1%) /Mem (10%) overhead |          |            |               | 0.17        | 3.025     |
| Total                            |          |            |               | 17.17       | 33.275    |
| Worker nodes                     | 3        |            | round:        | 6           | 12        |
| Reserve nodes                    | 1        |            | instance type | 8           | 16        |